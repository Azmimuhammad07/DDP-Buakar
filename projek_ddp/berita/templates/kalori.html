{% extends 'index.html' %}
{% block content %}
{% load static %}

<div class="container mt-5">
  <h1 class="text-center mb-4">Kalkulator Kalori Harian</h1>

  <div class="card mx-auto" style="max-width: 600px;">
    <div class="card-body">
      <form id="calorieForm">
        <div class="mb-3">
          <label for="gender" class="form-label">Jenis Kelamin</label>
          <select class="form-select" id="gender" required>
            <option value="">Pilih jenis kelamin</option>
            <option value="male">Laki-laki</option>
            <option value="female">Perempuan</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="age" class="form-label">Umur (tahun)</label>
          <input type="number" class="form-control" id="age" placeholder="Masukkan umur Anda" required>
        </div>

        <div class="mb-3">
          <label for="weight" class="form-label">Berat Badan (kg)</label>
          <input type="number" step="0.1" class="form-control" id="weight" placeholder="Masukkan berat badan Anda" required>
        </div>

        <div class="mb-3">
          <label for="height" class="form-label">Tinggi Badan (cm)</label>
          <input type="number" step="0.1" class="form-control" id="height" placeholder="Masukkan tinggi badan Anda" required>
        </div>

        <div class="mb-3">
          <label for="activity_level" class="form-label">Tingkat Aktivitas</label>
          <select class="form-select" id="activity_level" required>
            <option value="">Pilih tingkat aktivitas</option>
            <option value="1.2">Sedentary (Jarang Beraktivitas)</option>
            <option value="1.375">Ringan (Olahraga ringan 1-3 hari/minggu)</option>
            <option value="1.55">Sedang (Olahraga sedang 3-5 hari/minggu)</option>
            <option value="1.725">Aktif (Olahraga berat 6-7 hari/minggu)</option>
            <option value="1.9">Sangat Aktif (Olahraga sangat berat/pekerjaan fisik)</option>
          </select>
        </div>

        <button type="button" id="calculateCalories" class="btn btn-primary w-100">Hitung Kalori</button>
      </form>

      <div id="resultContainer" class="alert alert-success mt-4" style="display: none;">
        <h4 class="alert-heading">Hasil Perhitungan:</h4>
        <p id="result"></p>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById("calculateCalories").addEventListener("click", function () {
    const gender = document.getElementById("gender").value;
    const age = parseInt(document.getElementById("age").value);
    const weight = parseFloat(document.getElementById("weight").value);
    const height = parseFloat(document.getElementById("height").value);
    const activityLevel = parseFloat(document.getElementById("activity_level").value);

    if (!gender || isNaN(age) || isNaN(weight) || isNaN(height) || isNaN(activityLevel)) {
      alert("Mohon isi semua bidang!");
      return;
    }

    // Menghitung BMR (Basal Metabolic Rate) menggunakan rumus Mifflin-St Jeor
    let bmr;
    if (gender === "male") {
      bmr = 10 * weight + 6.25 * height - 5 * age + 5;
    } else if (gender === "female") {
      bmr = 10 * weight + 6.25 * height - 5 * age - 161;
    }

    // Menghitung kebutuhan kalori harian berdasarkan tingkat aktivitas
    const dailyCalories = bmr * activityLevel;

    // Menampilkan hasil
    document.getElementById("result").innerText = `Kebutuhan kalori harian Anda: ${dailyCalories.toFixed(2)} kalori.`;
    document.getElementById("resultContainer").style.display = "block";
  });
</script>

{% endblock %}
